{
  "$id": "https://github.com/data-fair/metrics/daily-api-metric",
  "x-exports": ["types"],
  "type":"object",
  "title": "daily api metric",
  "additionalProperties":false,
  "required":[
    "owner",
    "day",
    "resource",
    "operationTrack",
    "statusClass",
    "userClass",
    "refererDomain",
    "nbRequests",
    "bytes",
    "duration"
  ],
  "properties":{
    "owner": {"$ref": "#/definitions/shortAccount"},
    "day":{
      "type":"string",
      "format":"date"
    },
    "resource": {"$ref": "#/definitions/resource"},
    "operationTrack": {"type": "string"},
    "statusClass": {"$ref": "#/definitions/statusClass"},
    "userClass": {"$ref": "#/definitions/userClass"},
    "refererDomain":{"type":"string"},
    "refererApp":{"type":"string"},
    "processing":{"$ref": "#/definitions/processing"},
    "nbRequests":{
      "type":"integer",
      "default":0
    },
    "bytes":{
      "type":"integer",
      "default":0
    },
    "duration":{
      "type":"number",
      "default":0
    }
  },
  "definitions": {
    "shortAccount": {
      "type": "object",
      "required": ["type", "id"],
      "properties": {
        "type": { "type": "string" },
        "id": { "type": "string" },
        "department": { "type": "string" }
      }
    },
    "resource": {
      "type":"object",
      "additionalProperties":false,
      "required":[
        "type",
        "id"
      ],
      "properties":{
        "type":{
          "type":"string"
        },
        "id":{
          "type":"string"
        },
        "title":{
          "type":"string"
        }
      }
    },
    "processing": {
      "type":"object",
      "additionalProperties":false,
      "required":[
        "_id"
      ],
      "properties":{
        "_id":{
          "type":"string"
        },
        "title":{
          "type":"string"
        }
      }
    },
    "operation": {
      "type":"object",
      "additionalProperties":false,
      "required":[
        "id",
        "class"
      ],
      "properties":{
        "id":{
          "type":"string"
        },
        "class":{
          "type":"string"
        },
        "track":{
          "type":"string"
        }
      }
    },
    "statusClass": {
      "type":"string"
    },
    "userClass": {
      "type":"string"
    }
  }
}